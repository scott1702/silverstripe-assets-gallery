!function e(t,n,r){function a(o,l){if(!n[o]){if(!t[o]){var s="function"==typeof require&&require;if(!l&&s)return s(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return a(n?n:e)},c,c.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var a=e,i=t,o=n;r=!1,null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,i);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(a);if(null===u)return;e=u,t=i,n=o,r=!0,l=u=void 0}},s=e("jQuery"),u=r(s),c=e("events"),d=r(c),f=function(e){function t(e,n,r,i,o,s,u,c){a(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.fetch_url=e,this.search_url=n,this.update_url=r,this.delete_url=i,this.limit=o,this.bulkActions=s,this.$folder=u,this.folder=c,this.page=1}return i(t,e),o(t,[{key:"fetch",value:function(e){var t=this;if("undefined"!=typeof e)return this.page=1,this.request("POST",this.fetch_url,{id:e}).then(function(e){t.emit("onFetchData",e)})}},{key:"search",value:function(){var e=this;return this.page=1,this.request("GET",this.search_url).then(function(t){e.emit("onSearchData",t)})}},{key:"more",value:function(){var e=this;return this.page++,this.request("GET",this.search_url).then(function(t){e.emit("onMoreData",t)})}},{key:"navigate",value:function(e){var t=this;return this.page=1,this.folder=e,this.persistFolderFilter(e),this.request("GET",this.search_url).then(function(e){t.emit("onNavigateData",e)})}},{key:"persistFolderFilter",value:function(e){"/"===e.substr(-1)&&(e=e.substr(0,e.length-1)),this.$folder.val(e)}},{key:"delete",value:function(e){var t=this;return this.request("DELETE",this.delete_url,{ids:e}).then(function(){t.emit("onDeleteData",e)})}},{key:"filter",value:function(e,t,n,r,a,i){this.name=e,this.type=t,this.folder=n,this.createdFrom=r,this.createdTo=a,this.onlySearchInFolder=i,this.search()}},{key:"save",value:function(e,t){var n=this,r={id:e};return t.forEach(function(e){r[e.name]=e.value}),this.request("POST",this.update_url,r).then(function(){n.emit("onSaveData",e,r)})}},{key:"request",value:function(e,t){var n=this,r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],a={limit:this.limit,page:this.page};return this.name&&""!==this.name.trim()&&(a.name=decodeURIComponent(this.name)),this.folder&&""!==this.folder.trim()&&(a.folder=decodeURIComponent(this.folder)),this.createdFrom&&""!==this.createdFrom.trim()&&(a.createdFrom=decodeURIComponent(this.createdFrom)),this.createdTo&&""!==this.createdTo.trim()&&(a.createdTo=decodeURIComponent(this.createdTo)),this.onlySearchInFolder&&""!==this.onlySearchInFolder.trim()&&(a.onlySearchInFolder=decodeURIComponent(this.onlySearchInFolder)),this.showLoadingIndicator(),u["default"].ajax({url:t,type:e,dataType:"json",data:u["default"].extend(a,r)}).always(function(){n.hideLoadingIndicator()})}},{key:"showLoadingIndicator",value:function(){(0,u["default"])(".cms-content, .ui-dialog").addClass("loading"),(0,u["default"])(".ui-dialog-content").css("opacity",".1")}},{key:"hideLoadingIndicator",value:function(){(0,u["default"])(".cms-content, .ui-dialog").removeClass("loading"),(0,u["default"])(".ui-dialog-content").css("opacity","1")}}]),t}(d["default"]);n["default"]=f,t.exports=n["default"]},{events:15,jQuery:"jQuery"}],2:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(){var e=(0,o["default"])(".asset-gallery").find(".asset-gallery-component-wrapper"),t=e.data("asset-gallery-initial-folder")||"",n=t;return{current_folder:n,initial_folder:t,name:(0,o["default"])(".asset-gallery").data("asset-gallery-name"),route:"/assets/:action?/:id?"}}var i=e("jQuery"),o=r(i),l=e("react"),s=r(l),u=e("react-dom"),c=r(u),d=e("react-redux"),f=e("../state/configureStore"),p=r(f),h=(e("../state/gallery/actions"),e("../sections/asset-admin/controller")),y=r(h),v=e("../sections/gallery/controller"),m=r(v),g=e("../sections/editor/controller"),E=r(g),_=e("../constants"),b=r(_);o["default"].entwine("ss",function(e){e(".asset-gallery-component-wrapper").entwine({onadd:function(){var e=(0,p["default"])(),t=a();c["default"].render(s["default"].createElement(d.Provider,{store:e},s["default"].createElement(y["default"],null,s["default"].createElement(m["default"],t),s["default"].createElement(E["default"],{route:b["default"].EDITING_ROUTE}))),this[0]),window.ss.router("*",function(){})},onremove:function(){c["default"].unmountComponentAtNode(this[0])}})})},{"../constants":6,"../sections/asset-admin/controller":7,"../sections/editor/controller":8,"../sections/gallery/controller":9,"../state/configureStore":11,"../state/gallery/actions":12,jQuery:"jQuery",react:"react","react-dom":"react-dom","react-redux":"react-redux"}],3:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return{gallery:e.assetAdmin.gallery}}function s(e){return{actions:(0,O.bindActionCreators)(F,e)}}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e,t,n){for(var r=!0;r;){var a=e,i=t,o=n;r=!1,null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,i);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(a);if(null===u)return;e=u,t=i,n=o,r=!0,l=u=void 0}},d=e("jQuery"),f=a(d),p=e("react"),h=a(p),y=e("react-dom"),v=a(y),m=e("silverstripe-component"),g=a(m),E=e("react-addons-test-utils"),_=a(E),b=e("react-redux"),O=e("redux"),k=e("../../state/gallery/actions"),F=r(k),T=e("i18n"),L=a(T),S=function(e){function t(e){i(this,t),c(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.onChangeValue=this.onChangeValue.bind(this)}return o(t,e),u(t,[{key:"componentDidMount",value:function(){var e=(0,f["default"])(v["default"].findDOMNode(this)).find(".dropdown");e.chosen({allow_single_deselect:!0,disable_search_threshold:20}),e.change(function(){return _["default"].Simulate.click(e.find(":selected")[0])})}},{key:"render",value:function(){var e=this;return h["default"].createElement("div",{className:"gallery__bulk-actions fieldholder-small"},this.props.gallery.bulkActions.options.map(function(t,n){return h["default"].createElement("button",{type:"button",className:"gallery__bulk-actions_action font-icon-trash ss-ui-button ui-corner-all",key:n,onClick:e.onChangeValue,value:t.value},t.label)}))}},{key:"getOptionByValue",value:function(e){for(var t=0;t<this.props.gallery.bulkActions.options.length;t+=1)if(this.props.gallery.bulkActions.options[t].value===e)return this.props.gallery.bulkActions.options[t];return null}},{key:"getSelectedFiles",value:function(){return this.props.gallery.selectedFiles}},{key:"applyAction",value:function(e){switch(e){case"delete":this.props.backend["delete"](this.getSelectedFiles());default:return!1}}},{key:"onChangeValue",value:function(e){var t=this.getOptionByValue(e.target.value);null!==t&&(t.destructive===!0?confirm(L["default"].sprintf(L["default"]._t("AssetGalleryField.BULK_ACTIONS_CONFIRM"),t.label))&&this.applyAction(t.value):this.applyAction(t.value),(0,f["default"])(v["default"].findDOMNode(this)).find(".dropdown").val("").trigger("liszt:updated"))}}]),t}(g["default"]);n["default"]=S,n["default"]=(0,b.connect)(l,s)(S),t.exports=n["default"]},{"../../state/gallery/actions":12,i18n:"i18n",jQuery:"jQuery",react:"react","react-addons-test-utils":"react-addons-test-utils","react-dom":"react-dom","react-redux":"react-redux",redux:"redux","silverstripe-component":"silverstripe-component"}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var a=e,i=t,o=n;r=!1,null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,i);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(a);if(null===u)return;e=u,t=i,n=o,r=!0,l=u=void 0}},s=e("jQuery"),u=(r(s),e("i18n")),c=r(u),d=e("react"),f=r(d),p=e("../../constants"),h=r(p),y=e("silverstripe-component"),v=r(y),m=function(e){function t(e){a(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleToggleSelect=this.handleToggleSelect.bind(this),this.handleDelete=this.handleDelete.bind(this),this.handleActivate=this.handleActivate.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.preventFocus=this.preventFocus.bind(this)}return i(t,e),o(t,[{key:"handleActivate",value:function(e){e.stopPropagation(),this.props.handleActivate(e,this.props.item)}},{key:"handleToggleSelect",value:function(e){e.stopPropagation(),this.props.handleToggleSelect(e,this.props.item)}},{key:"handleDelete",value:function(e){this.props.handleDelete(e,this.props.item)}},{key:"getThumbnailStyles",value:function(){return"image"===this.props.item.category?{backgroundImage:"url("+this.props.item.url+")"}:{}}},{key:"getThumbnailClassNames",value:function(){var e="item__thumbnail";return this.isImageLargerThanThumbnail()&&(e+=" item__thumbnail--large"),e}},{key:"getItemClassNames",value:function(){var e="item item--"+this.props.item.category;return this.props.selected&&(e+=" item--selected"),e}},{key:"isImageLargerThanThumbnail",value:function(){var e=this.props.item.attributes.dimensions;return e.height>h["default"].THUMBNAIL_HEIGHT||e.width>h["default"].THUMBNAIL_WIDTH}},{key:"handleKeyDown",value:function(e){e.stopPropagation(),this.props.spaceKey===e.keyCode&&this.handleToggleSelect(e),this.props.returnKey===e.keyCode&&this.handleActivate(e,this.props.item)}},{key:"preventFocus",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e;return e=f["default"].createElement("button",{className:"item__actions__action--select [ font-icon-tick ]",type:"button",title:c["default"]._t("AssetGalleryField.SELECT"),tabIndex:"-1",onMouseDown:this.preventFocus,onClick:this.handleToggleSelect}),f["default"].createElement("div",{className:this.getItemClassNames(),"data-id":this.props.item.id,tabIndex:"0",onKeyDown:this.handleKeyDown,onClick:this.handleActivate},f["default"].createElement("div",{ref:"thumbnail",className:this.getThumbnailClassNames(),style:this.getThumbnailStyles()},f["default"].createElement("div",{className:"item--overlay [ font-icon-edit ]"},"View")),f["default"].createElement("div",{className:"item__title",ref:"title"},this.props.item.title,e))}}]),t}(v["default"]);m.propTypes={item:f["default"].PropTypes.object.isRequired,selected:f["default"].PropTypes.bool.isRequired,spaceKey:f["default"].PropTypes.number,returnKey:f["default"].PropTypes.number,handleActivate:f["default"].PropTypes.func.isRequired,handleToggleSelect:f["default"].PropTypes.func.isRequired,handleDelete:f["default"].PropTypes.func.isRequired},n["default"]=m,t.exports=n["default"]},{"../../constants":6,i18n:"i18n",jQuery:"jQuery",react:"react","silverstripe-component":"silverstripe-component"}],5:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var a=e,i=t,o=n;r=!1,null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,i);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(a);if(null===u)return;e=u,t=i,n=o,r=!0,l=u=void 0}},s=e("react"),u=r(s),c=e("silverstripe-component"),d=r(c),f=function(e){function t(e){a(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleChange=this.handleChange.bind(this)}return i(t,e),o(t,[{key:"render",value:function(){return u["default"].createElement("div",{className:"field text"},u["default"].createElement("label",{className:"left",htmlFor:"gallery_"+this.props.name},this.props.label),u["default"].createElement("div",{className:"middleColumn"},u["default"].createElement("input",{id:"gallery_"+this.props.name,className:"text",type:"text",name:this.props.name,onChange:this.handleChange,value:this.props.value})))}},{key:"handleChange",value:function(e){this.props.onChange()}}]),t}(d["default"]);n["default"]=f,f.propTypes={label:u["default"].PropTypes.string.isRequired,name:u["default"].PropTypes.string.isRequired,value:u["default"].PropTypes.string.isRequired,onChange:u["default"].PropTypes.func.isRequired},t.exports=n["default"]},{react:"react","silverstripe-component":"silverstripe-component"}],6:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var a=e("i18n"),i=r(a);n["default"]={THUMBNAIL_HEIGHT:150,THUMBNAIL_WIDTH:200,SPACE_KEY_CODE:32,RETURN_KEY_CODE:13,BULK_ACTIONS:[{value:"delete",label:i["default"]._t("AssetGalleryField.BULK_ACTIONS_DELETE"),destructive:!0}],BULK_ACTIONS_PLACEHOLDER:i["default"]._t("AssetGalleryField.BULK_ACTIONS_PLACEHOLDER"),HOME_ROUTE:"/assets",EDITING_ROUTE:"/assets/EditForm/field/Files/item/:id/edit",FOLDER_ROUTE:"/assets/show"},t.exports=n["default"]},{i18n:"i18n"}],7:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return{assetAdmin:e.assetAdmin}}function s(e){return{actions:(0,_.bindActionCreators)(g,e)}}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e,t,n){for(var r=!0;r;){var a=e,i=t,o=n;r=!1,null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,i);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(a);if(null===u)return;e=u,t=i,n=o,r=!0,l=u=void 0}},d=e("jQuery"),f=a(d),p=e("react"),h=a(p),y=e("silverstripe-component"),v=a(y),m=e("../../state/gallery/actions"),g=r(m),E=e("react-redux"),_=e("redux"),b=e("../../backend/file-backend"),O=a(b),k=e("../../constants"),F=a(k),T=function(e){function t(e){i(this,t),c(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var n=(0,f["default"])(".asset-gallery").find(".asset-gallery-component-wrapper"),r=(0,f["default"])(".cms-search-form");0===r.find('[type=hidden][name="q[Folder]"]').length&&r.append('<input type="hidden" name="q[Folder]" />'),this.backend=new O["default"](n.data("asset-gallery-fetch-url"),n.data("asset-gallery-search-url"),n.data("asset-gallery-update-url"),n.data("asset-gallery-delete-url"),n.data("asset-gallery-limit"),n.data("asset-gallery-bulk-actions"),r.find('[type=hidden][name="q[Folder]"]'),n.data("asset-gallery-initial-folder")||""),this.handleBackendFetch=this.handleBackendFetch.bind(this),this.handleBackendSave=this.handleBackendSave.bind(this),this.handleBackendDelete=this.handleBackendDelete.bind(this),this.handleBackendNavigate=this.handleBackendNavigate.bind(this),this.handleBackendMore=this.handleBackendMore.bind(this),this.handleBackendSearch=this.handleBackendSearch.bind(this)}return o(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this;c(Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.backend.search().done(function(t,n,r){var a=new window.ss.router.Route(F["default"].EDITING_ROUTE),i=window.ss.router.current,o=e.props.assetAdmin.gallery.files,l={};a.match(i,l)&&e.props.actions.setEditing(o.filter(function(e){return e.id===parseInt(l.id,10)})[0]),e.props.actions.setPath(i)}.bind(this)),this.backend.addListener("onFetchData",this.handleBackendFetch),this.backend.addListener("onSaveData",this.handleBackendSave),this.backend.addListener("onDeleteData",this.handleBackendDelete),this.backend.addListener("onNavigateData",this.handleBackendNavigate),this.backend.addListener("onMoreData",this.handleBackendMore),this.backend.addListener("onSearchData",this.handleBackendSearch)}},{key:"componentWillUnmount",value:function(){c(Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this),this.backend.removeListener("onFetchData",this.handleBackendFetch),this.backend.removeListener("onSaveData",this.handleBackendSave),this.backend.removeListener("onDeleteData",this.handleBackendDelete),this.backend.removeListener("onNavigateData",this.handleBackendNavigate),this.backend.removeListener("onMoreData",this.handleBackendMore),this.backend.removeListener("onSearchData",this.handleBackendSearch)}},{key:"render",value:function(){var e=this,t=h["default"].Children.map(this.props.children,function(t){return h["default"].cloneElement(t,{backend:e.backend})});return h["default"].createElement("div",{className:"gallery"},t)}},{key:"handleEnterRoute",value:function(e,t){this.props.actions.setPath(e.path),t()}},{key:"handleExitRoute",value:function(e,t){this.props.actions.setPath(null),t()}},{key:"handleBackendFetch",value:function(e){this.props.actions.addFiles(e.files,e.count)}},{key:"handleBackendSave",value:function(e,t){this.props.actions.setEditing(null),this.props.actions.updateFile(e,{title:t.title,basename:t.basename})}},{key:"handleBackendDelete",value:function(e){this.props.actions.deselectFiles(e),this.props.actions.removeFiles(e)}},{key:"handleBackendNavigate",value:function(e){this.props.actions.removeFiles(),this.props.actions.addFiles(e.files,e.count)}},{key:"handleBackendMore",value:function(e){this.props.actions.addFiles(this.props.assetAdmin.gallery.files.concat(e.files),e.count)}},{key:"handleBackendSearch",value:function(e){this.props.actions.addFiles(e.files,e.count)}}]),t}(v["default"]);n["default"]=(0,E.connect)(l,s)(T),t.exports=n["default"]},{"../../backend/file-backend":1,"../../constants":6,"../../state/gallery/actions":12,jQuery:"jQuery",react:"react","react-redux":"react-redux",redux:"redux","silverstripe-component":"silverstripe-component"}],8:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return{editorFields:e.assetAdmin.gallery.editorFields,file:e.assetAdmin.gallery.editing,files:e.assetAdmin.gallery.files,path:e.assetAdmin.gallery.path}}function s(e){return{actions:(0,E.bindActionCreators)(b,e)}}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e,t,n){for(var r=!0;r;){var a=e,i=t,o=n;r=!1,null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,i);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(a);if(null===u)return;e=u,t=i,n=o,r=!0,l=u=void 0}},d=e("jQuery"),f=(a(d),e("i18n")),p=a(f),h=e("react"),y=a(h),v=e("silverstripe-component"),m=a(v),g=e("react-redux"),E=e("redux"),_=e("../../state/gallery/actions"),b=r(_),O=e("../../components/text-field/index"),k=a(O),F=e("../../constants"),T=a(F),L=function(e){function t(e){i(this,t),c(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var n=this.props.file;this.fields=[{label:"Title",name:"title",value:null===n?n:n.title},{label:"Filename",name:"basename",value:null===n?n:n.basename}],this.onFieldChange=this.onFieldChange.bind(this),this.onFileSave=this.onFileSave.bind(this),this.onCancel=this.onCancel.bind(this)}return o(t,e),u(t,[{key:"componentDidMount",value:function(){c(Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.props.actions.setEditorFields(this.fields)}},{key:"componentWillUnmount",value:function(){c(Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this),this.props.actions.setEditorFields()}},{key:"onFieldChange",value:function(e){this.props.actions.updateEditorField({name:e.target.name,value:e.target.value})}},{key:"onFileSave",value:function(e){this.props.onFileSave(this.props.file.id,this.props.editorFields),e.stopPropagation(),e.preventDefault()}},{key:"onCancel",value:function(e){window.ss.router.show(T["default"].HOME_ROUTE)}},{key:"handleEnterRoute",value:function(e,t){null===this.props.file&&this.props.actions.setEditing(this.props.files.filter(function(t){return t.id===parseInt(e.params.id,10)})[0])}},{key:"handleEnterRoute",value:function(e,t){null===this.props.file&&this.props.actions.setEditing(this.props.files.filter(function(t){return t.id===parseInt(e.params.id,10)})[0])}},{key:"handleExitRoute",value:function(e,t){this.props.actions.setEditing(null)}},{key:"render",value:function(){var e=this;return null===this.props.file?null:y["default"].createElement("div",{className:"editor"},y["default"].createElement("div",{className:"CompositeField composite cms-file-info nolabel"},y["default"].createElement("div",{className:"CompositeField composite cms-file-info-preview nolabel"},y["default"].createElement("img",{className:"thumbnail-preview",src:this.props.file.url})),y["default"].createElement("div",{className:"CompositeField composite cms-file-info-data nolabel"},y["default"].createElement("div",{className:"CompositeField composite nolabel"},y["default"].createElement("div",{className:"field readonly"},y["default"].createElement("label",{className:"left"},p["default"]._t("AssetGalleryField.TYPE"),":"),y["default"].createElement("div",{className:"middleColumn"},y["default"].createElement("span",{className:"readonly"},this.props.file.type)))),y["default"].createElement("div",{className:"field readonly"},y["default"].createElement("label",{className:"left"},p["default"]._t("AssetGalleryField.SIZE"),":"),y["default"].createElement("div",{className:"middleColumn"},y["default"].createElement("span",{className:"readonly"},this.props.file.size))),y["default"].createElement("div",{className:"field readonly"},y["default"].createElement("label",{className:"left"},p["default"]._t("AssetGalleryField.URL"),":"),y["default"].createElement("div",{className:"middleColumn"},y["default"].createElement("span",{className:"readonly"},y["default"].createElement("a",{href:this.props.file.url,target:"_blank"},this.props.file.url)))),y["default"].createElement("div",{className:"field date_disabled readonly"},y["default"].createElement("label",{className:"left"},p["default"]._t("AssetGalleryField.CREATED"),":"),y["default"].createElement("div",{className:"middleColumn"},y["default"].createElement("span",{className:"readonly"},this.props.file.created))),y["default"].createElement("div",{className:"field date_disabled readonly"},y["default"].createElement("label",{className:"left"},p["default"]._t("AssetGalleryField.LASTEDIT"),":"),y["default"].createElement("div",{className:"middleColumn"},y["default"].createElement("span",{className:"readonly"},this.props.file.lastUpdated))),y["default"].createElement("div",{className:"field readonly"},y["default"].createElement("label",{className:"left"},p["default"]._t("AssetGalleryField.DIM"),":"),y["default"].createElement("div",{className:"middleColumn"},y["default"].createElement("span",{className:"readonly"},this.props.file.attributes.dimensions.width," x ",this.props.file.attributes.dimensions.height,"px"))))),this.props.editorFields.map(function(t,n){return y["default"].createElement(k["default"],{key:n,label:t.label,name:t.name,value:e.props.file[t.name],onChange:e.onFieldChange})}),y["default"].createElement("div",null,y["default"].createElement("button",{type:"submit",className:"ss-ui-button ui-button ui-widget ui-state-default ui-corner-all font-icon-check-mark",onClick:this.onFileSave},p["default"]._t("AssetGalleryField.SAVE")),y["default"].createElement("button",{type:"button",className:"ss-ui-button ui-button ui-widget ui-state-default ui-corner-all font-icon-cancel-circled",onClick:this.onCancel},p["default"]._t("AssetGalleryField.CANCEL"))))}}]),t}(m["default"]);L.propTypes={file:y["default"].PropTypes.shape({id:y["default"].PropTypes.number,title:y["default"].PropTypes.string,basename:y["default"].PropTypes.string,url:y["default"].PropTypes.string,size:y["default"].PropTypes.string,created:y["default"].PropTypes.string,lastUpdated:y["default"].PropTypes.string,dimensions:y["default"].PropTypes.shape({width:y["default"].PropTypes.number,height:y["default"].PropTypes.number})}),backend:y["default"].PropTypes.object.isRequired},n["default"]=(0,g.connect)(l,s)(L),t.exports=n["default"]},{"../../components/text-field/index":5,"../../constants":6,"../../state/gallery/actions":12,i18n:"i18n",jQuery:"jQuery",react:"react","react-redux":"react-redux",redux:"redux","silverstripe-component":"silverstripe-component"}],9:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){return function(n,r){var a=n[e].toLowerCase(),i=r[e].toLowerCase();if("asc"===t){if(i>a)return-1;if(a>i)return 1}else{if(a>i)return-1;if(i>a)return 1}return 0}}function s(e){return{gallery:e.assetAdmin.gallery}}function u(e){return{actions:(0,b.bindActionCreators)(P,e)}}Object.defineProperty(n,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e,t,n){for(var r=!0;r;){var a=e,i=t,o=n;r=!1,null===a&&(a=Function.prototype);var l=Object.getOwnPropertyDescriptor(a,i);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(a);if(null===u)return;e=u,t=i,n=o,r=!0,l=u=void 0}},f=e("jQuery"),p=a(f),h=e("i18n"),y=a(h),v=e("react"),m=a(v),g=e("react-dom"),E=a(g),_=e("react-redux"),b=e("redux"),O=e("react-addons-test-utils"),k=a(O),F=e("../../components/file/index"),T=a(F),L=e("../../components/bulk-actions/index"),S=a(L),w=e("silverstripe-component"),D=a(w),A=e("../../constants"),I=a(A),j=e("../../state/gallery/actions"),P=r(j),C=function(e){function t(e){i(this,t),d(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.sort="name",this.direction="asc",this.sorters=[{field:"title",direction:"asc",label:y["default"]._t("AssetGalleryField.FILTER_TITLE_ASC")},{field:"title",direction:"desc",label:y["default"]._t("AssetGalleryField.FILTER_TITLE_DESC")},{field:"created",direction:"desc",label:y["default"]._t("AssetGalleryField.FILTER_DATE_DESC")},{field:"created",direction:"asc",label:y["default"]._t("AssetGalleryField.FILTER_DATE_ASC")}],this.handleFolderActivate=this.handleFolderActivate.bind(this),this.handleFileActivate=this.handleFileActivate.bind(this),this.handleToggleSelect=this.handleToggleSelect.bind(this),this.handleItemDelete=this.handleItemDelete.bind(this),this.handleBackClick=this.handleBackClick.bind(this),this.handleMoreClick=this.handleMoreClick.bind(this),this.handleSort=this.handleSort.bind(this)}return o(t,e),c(t,[{key:"componentDidMount",value:function(){d(Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this);var e=(0,p["default"])(E["default"].findDOMNode(this)).find(".gallery__sort .dropdown");e.chosen({allow_single_deselect:!0,disable_search_threshold:20}),e.change(function(){return k["default"].Simulate.click(e.find(":selected")[0]);
})}},{key:"handleSort",value:function(e){var t=e.target.dataset;this.props.actions.sortFiles(l(t.field,t.direction))}},{key:"getNoItemsNotice",value:function(){return this.props.gallery.count<1?m["default"].createElement("p",{className:"gallery__no-item-notice"},y["default"]._t("AssetGalleryField.NOITEMSFOUND")):null}},{key:"getBackButton",value:function(){return this.props.gallery.viewingFolder?m["default"].createElement("button",{className:"gallery__back ss-ui-button ui-button ui-widget ui-state-default ui-corner-all font-icon-level-up no-text",onClick:this.handleBackClick,ref:"backButton"}):null}},{key:"getBulkActionsComponent",value:function(){return this.props.gallery.selectedFiles.length>0&&this.props.backend.bulkActions?m["default"].createElement(S["default"],{backend:this.props.backend}):null}},{key:"getMoreButton",value:function(){return this.props.gallery.count>this.props.gallery.files.length?m["default"].createElement("button",{className:"gallery__load__more",onClick:this.handleMoreClick},y["default"]._t("AssetGalleryField.LOADMORE")):null}},{key:"render",value:function(){var e=this;return m["default"].createElement("div",null,this.getBackButton(),this.getBulkActionsComponent(),m["default"].createElement("div",{className:"gallery__sort fieldholder-small"},m["default"].createElement("select",{className:"dropdown no-change-track no-chzn",tabIndex:"0",style:{width:"160px"}},this.sorters.map(function(t,n){return m["default"].createElement("option",{key:n,onClick:e.handleSort,"data-field":t.field,"data-direction":t.direction},t.label)}))),m["default"].createElement("div",{className:"gallery__folders"},this.props.gallery.files.map(function(t,n){return"folder"===t.type?m["default"].createElement(T["default"],{key:n,item:t,selected:e.itemIsSelected(t.id),spaceKey:I["default"].SPACE_KEY_CODE,returnKey:I["default"].RETURN_KEY_CODE,handleDelete:e.handleItemDelete,handleToggleSelect:e.handleToggleSelect,handleActivate:e.handleFolderActivate}):void 0})),m["default"].createElement("div",{className:"gallery__files"},this.props.gallery.files.map(function(t,n){return"folder"!==t.type?m["default"].createElement(T["default"],{key:n,item:t,selected:e.itemIsSelected(t.id),spaceKey:I["default"].SPACE_KEY_CODE,returnKey:I["default"].RETURN_KEY_CODE,handleDelete:e.handleItemDelete,handleToggleSelect:e.handleToggleSelect,handleActivate:e.handleFileActivate}):void 0})),this.getNoItemsNotice(),m["default"].createElement("div",{className:"gallery__load"},this.getMoreButton()))}},{key:"handleEnterRoute",value:function(e,t){var n=!1;"show"===e.params.action&&"undefined"!=typeof e.params.id&&(n=!0),this.props.actions.setViewingFolder(n),t()}},{key:"handleItemDelete",value:function(e,t){confirm(y["default"]._t("AssetGalleryField.CONFIRMDELETE"))&&this.props.backend["delete"](t.id)}},{key:"itemIsSelected",value:function(e){return this.props.gallery.selectedFiles.indexOf(e)>-1}},{key:"handleFolderActivate",value:function(e,t){this.props.actions.deselectFiles(),window.ss.router.show(I["default"].FOLDER_ROUTE+"/"+t.id)}},{key:"handleFileActivate",value:function(e,t){this.props.actions.setEditing(t),window.ss.router.show(I["default"].EDITING_ROUTE.replace(":id",t.id))}},{key:"handleToggleSelect",value:function(e,t){-1===this.props.gallery.selectedFiles.indexOf(t.id)?this.props.actions.selectFiles([t.id]):this.props.actions.deselectFiles([t.id])}},{key:"handleMoreClick",value:function(e){e.stopPropagation(),e.preventDefault(),this.props.backend.more()}},{key:"handleBackClick",value:function(e){e.preventDefault(),this.props.actions.deselectFiles()}}]),t}(D["default"]);C.propTypes={backend:m["default"].PropTypes.object.isRequired},n["default"]=(0,_.connect)(s,u)(C),t.exports=n["default"]},{"../../components/bulk-actions/index":3,"../../components/file/index":4,"../../constants":6,"../../state/gallery/actions":12,i18n:"i18n",jQuery:"jQuery",react:"react","react-addons-test-utils":"react-addons-test-utils","react-dom":"react-dom","react-redux":"react-redux",redux:"redux","silverstripe-component":"silverstripe-component"}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={ADD_FILES:"ADD_FILES",REMOVE_FILES:"REMOVE_FILES",UPDATE_FILE:"UPDATE_FILE",SELECT_FILES:"SELECT_FILES",DESELECT_FILES:"DESELECT_FILES",SET_EDITING:"SET_EDITING",SET_EDITOR_FIELDS:"SET_EDITOR_FIELDS",UPDATE_EDITOR_FIELD:"UPDATE_EDITOR_FIELD",SORT_FILES:"SORT_FILES",SET_PATH:"SET_PATH",SET_VIEWING_FOLDER:"SET_VIEWING_FOLDER"};n.GALLERY=r},{}],11:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=f(d["default"],e);return t}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=a;var i=e("redux"),o=e("redux-thunk"),l=r(o),s=e("redux-logger"),u=r(s),c=e("./reducer"),d=r(c),f=(0,i.applyMiddleware)(l["default"],(0,u["default"])())(i.createStore);t.exports=n["default"]},{"./reducer":14,redux:"redux","redux-logger":17,"redux-thunk":"redux-thunk"}],12:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){return function(n,r){return n({type:y.GALLERY.ADD_FILES,payload:{files:e,count:t}})}}function i(e){return function(t,n){return t({type:y.GALLERY.REMOVE_FILES,payload:{ids:e}})}}function o(e,t){return function(n,r){return n({type:y.GALLERY.UPDATE_FILE,payload:{id:e,updates:t}})}}function l(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];return function(t,n){return t({type:y.GALLERY.SELECT_FILES,payload:{ids:e}})}}function s(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];return function(t,n){return t({type:y.GALLERY.DESELECT_FILES,payload:{ids:e}})}}function u(e){return function(t,n){return t({type:y.GALLERY.SET_EDITING,payload:{file:e}})}}function c(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];return function(t,n){return t({type:y.GALLERY.SET_EDITOR_FIELDS,payload:{editorFields:e}})}}function d(e){return function(t,n){return t({type:y.GALLERY.UPDATE_EDITOR_FIELD,payload:{updates:e}})}}function f(e){return function(t,n){return t({type:y.GALLERY.SET_PATH,payload:{path:e}})}}function p(e){return function(t,n){return t({type:y.GALLERY.SORT_FILES,payload:{comparator:e}})}}function h(e){return function(t,n){return t({type:y.GALLERY.SET_VIEWING_FOLDER,payload:{viewingFolder:e}})}}Object.defineProperty(n,"__esModule",{value:!0}),n.addFiles=a,n.removeFiles=i,n.updateFile=o,n.selectFiles=l,n.deselectFiles=s,n.setEditing=u,n.setEditorFields=c,n.updateEditorField=d,n.setPath=f,n.sortFiles=p,n.setViewingFolder=h;var y=e("../action-types"),v=e("../../constants");r(v)},{"../../constants":6,"../action-types":10}],13:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){void 0===e&&(e=c);var n;switch(t.type){case l.GALLERY.ADD_FILES:var r=[];return t.payload.files.forEach(function(t){var n=!1;e.files.forEach(function(e){e.id===t.id&&(n=!0)}),n||r.push(t)}),(0,o["default"])(Object.assign({},e,{count:"undefined"!=typeof t.payload.count?t.payload.count:e.count,files:e.files.concat(r)}));case l.GALLERY.REMOVE_FILES:return n="undefined"==typeof t.payload.ids?(0,o["default"])(Object.assign({},e,{count:0,files:[]})):(0,o["default"])(Object.assign({},e,{count:e.files.filter(function(e){return-1===t.payload.ids.indexOf(e.id)}).length,files:e.files.filter(function(e){return-1===t.payload.ids.indexOf(e.id)})}));case l.GALLERY.UPDATE_FILE:var a=e.files.map(function(e){return e.id}).indexOf(t.payload.id),i=Object.assign({},e.files[a],t.payload.updates);return(0,o["default"])(Object.assign({},e,{files:e.files.map(function(e){return e.id===i.id?i:e})}));case l.GALLERY.SELECT_FILES:return n=null===t.payload.ids?(0,o["default"])(Object.assign({},e,{selectedFiles:e.selectedFiles.concat(e.files.map(function(e){return e.id}).filter(function(t){return-1===e.selectedFiles.indexOf(t)}))})):(0,o["default"])(Object.assign({},e,{selectedFiles:e.selectedFiles.concat(t.payload.ids.filter(function(t){return-1===e.selectedFiles.indexOf(t)}))}));case l.GALLERY.DESELECT_FILES:return n=null===t.payload.ids?(0,o["default"])(Object.assign({},e,{selectedFiles:[]})):(0,o["default"])(Object.assign({},e,{selectedFiles:e.selectedFiles.filter(function(e){return-1===t.payload.ids.indexOf(e)})}));case l.GALLERY.SET_EDITING:return(0,o["default"])(Object.assign({},e,{editing:t.payload.file}));case l.GALLERY.SET_EDITOR_FIELDS:return(0,o["default"])(Object.assign({},e,{editorFields:t.payload.editorFields}));case l.GALLERY.UPDATE_EDITOR_FIELD:var s=e.editorFields.map(function(e){return e.name}).indexOf(t.payload.updates.name),u=Object.assign({},e.editorFields[s],t.payload.updates);return(0,o["default"])(Object.assign({},e,{editorFields:e.editorFields.map(function(e){return e.name===u.name?u:e})}));case l.GALLERY.SORT_FILES:var d=e.files.filter(function(e){return"folder"===e.type}),f=e.files.filter(function(e){return"folder"!==e.type});return(0,o["default"])(Object.assign({},e,{files:d.sort(t.payload.comparator).concat(f.sort(t.payload.comparator))}));case l.GALLERY.SET_PATH:return(0,o["default"])(Object.assign({},e,{path:t.payload.path}));case l.GALLERY.SET_VIEWING_FOLDER:return(0,o["default"])(Object.assign({},e,{viewingFolder:t.payload.viewingFolder}));default:return e}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=a;var i=e("deep-freeze"),o=r(i),l=e("../action-types"),s=e("../../constants.js"),u=r(s),c={bulkActions:{placeholder:u["default"].BULK_ACTIONS_PLACEHOLDER,options:u["default"].BULK_ACTIONS},count:0,editing:null,editorFields:[],files:[],focus:!1,path:null,selectedFiles:[],viewingFolder:!1};t.exports=n["default"]},{"../../constants.js":6,"../action-types":10,"deep-freeze":16}],14:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var a=e("redux"),i=e("./gallery/reducer.js"),o=r(i),l=(0,a.combineReducers)({assetAdmin:(0,a.combineReducers)({gallery:o["default"]})});n["default"]=l,t.exports=n["default"]},{"./gallery/reducer.js":13,redux:"redux"}],15:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function a(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function l(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,i,s,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],l(n))return!1;if(a(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,i=new Array(r-1),s=1;r>s;s++)i[s-1]=arguments[s];n.apply(this,i)}else if(o(n)){for(r=arguments.length,i=new Array(r-1),s=1;r>s;s++)i[s-1]=arguments[s];for(u=n.slice(),r=u.length,s=0;r>s;s++)u[s].apply(this,i)}return!0},r.prototype.addListener=function(e,t){var n;if(!a(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,a(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var n;n=l(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!a(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,i,l;if(!a(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,r=-1,n===t||a(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(l=i;l-- >0;)if(n[l]===t||n[l].listener&&n[l].listener===t){r=l;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],a(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?a(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?a(e._events[t])?1:e._events[t].length:0}},{}],16:[function(e,t,n){t.exports=function r(e){return Object.freeze(e),Object.getOwnPropertyNames(e).forEach(function(t){!e.hasOwnProperty(t)||null===e[t]||"object"!=typeof e[t]&&"function"!=typeof e[t]||Object.isFrozen(e[t])||r(e[t])}),e}},{}],17:[function(e,t,n){"use strict";function r(){function e(){T.forEach(function(e,t){var n=e.started,a=e.startedTime,l=e.action,s=e.prevState,u=e.error,d=e.took,f=e.nextState,h=T[t+1];h&&(f=h.prevState,d=h.started-n);var v=_(l),m="function"==typeof c?c(function(){return f},l):c,g=o(a),E=F.title?"color: "+F.title(v)+";":null,b="action "+(y?g:"")+" "+v.type+" "+(p?"(in "+d.toFixed(2)+" ms)":"");try{m?F.title?i.groupCollapsed("%c "+b,E):i.groupCollapsed(b):F.title?i.group("%c "+b,E):i.group(b)}catch(O){i.log(b)}F.prevState?i[r]("%c prev state","color: "+F.prevState(s)+"; font-weight: bold",s):i[r]("prev state",s),F.action?i[r]("%c action","color: "+F.action(v)+"; font-weight: bold",v):i[r]("action",v),u&&(F.error?i[r]("%c error","color: "+F.error(u,s)+"; font-weight: bold",u):i[r]("error",u)),F.nextState?i[r]("%c next state","color: "+F.nextState(f)+"; font-weight: bold",f):i[r]("next state",f);try{i.groupEnd()}catch(O){i.log("—— log end ——")}}),T.length=0}var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=t.level,r=void 0===n?"log":n,a=t.logger,i=void 0===a?console:a,s=t.logErrors,u=void 0===s?!0:s,c=t.collapsed,d=t.predicate,f=t.duration,p=void 0===f?!1:f,h=t.timestamp,y=void 0===h?!0:h,v=t.transformer,m=t.stateTransformer,g=void 0===m?function(e){return e}:m,E=t.actionTransformer,_=void 0===E?function(e){return e}:E,b=t.errorTransformer,O=void 0===b?function(e){return e}:b,k=t.colors,F=void 0===k?{title:function(){return"#000000"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}}:k;if("undefined"==typeof i)return function(){return function(e){return function(t){return e(t)}}};v&&console.error("Option 'transformer' is deprecated, use stateTransformer instead");var T=[];return function(t){var n=t.getState;return function(t){return function(r){if("function"==typeof d&&!d(n,r))return t(r);var a={};T.push(a),a.started=l.now(),a.startedTime=new Date,a.prevState=g(n()),a.action=r;var i=void 0;if(u)try{i=t(r)}catch(o){a.error=O(o)}else i=t(r);if(a.took=l.now()-a.started,a.nextState=g(n()),e(),a.error)throw a.error;return i}}}}var a=function(e,t){return new Array(t+1).join(e)},i=function(e,t){return a("0",t-e.toString().length)+e},o=function(e){return"@ "+i(e.getHours(),2)+":"+i(e.getMinutes(),2)+":"+i(e.getSeconds(),2)+"."+i(e.getMilliseconds(),3)},l="undefined"!=typeof performance&&"function"==typeof performance.now?performance:Date;t.exports=r},{}]},{},[2]);